@inherits LayoutComponentBase

@using FeriaAgricolaApp.Domain
@inject AppState State
@inject NavigationManager Nav

<div class="d-flex" style="min-height:100vh">

    <!-- ================= MENÚ ================= -->
    <nav class="bg-dark text-white p-3" style="width:250px">
        <div class="navbar navbar-dark">
            <span class="navbar-brand">Feria Agrícola</span>
        </div>

        @if (!State.EstaLogueado)
        {
            <ul class="nav flex-column mt-3">
                <li class="nav-item">
                    <NavLink class="nav-link text-white" href="/login">
                        Login
                    </NavLink>
                </li>
            </ul>
        }
        else
        {
            <ul class="nav flex-column mt-3">

                @if (!State.EsAdmin)
                {
                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/catalogo">
                            Catálogo
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/carrito">
                            Carrito
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/financiero">
                            Mis compras
                        </NavLink>
                    </li>
                }

                @if (State.EsAdmin)
                {
                    <li class="nav-item mt-3">
                        <span class="text-uppercase fw-bold text-secondary">
                            Administración
                        </span>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/admin/usuarios">
                            Usuarios
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/admin/inventario">
                            Inventario
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/admin/proveedores">
                            Proveedores
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link text-white" href="/admin/reportes">
                            Reportes
                        </NavLink>
                    </li>
                }

                <li class="nav-item mt-4">
                    <button class="btn btn-sm btn-outline-light w-100"
                            @onclick="CerrarSesion">
                        Cerrar sesión
                    </button>
                </li>
            </ul>
        }
    </nav>

    <!-- ================= CONTENIDO ================= -->
    <main class="flex-fill bg-light">
        <div class="container-fluid p-4">
            @Body
        </div>
    </main>

</div>
@code {
    private void CerrarSesion()
    {
        State.CerrarSesion();
        Nav.NavigateTo("/login");
    }
}
